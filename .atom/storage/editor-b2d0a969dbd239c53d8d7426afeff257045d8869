{"mode":"editor","version":1,"windowDimensions":{"x":4,"y":22,"width":1436,"height":878},"syntax":{"deserializer":"Syntax","grammarOverridesByPath":{}},"project":{"path":"/Users/tehgeekmeister/code/pedestal-app-tutorial/tutorial-client","buffers":[{"text":"(ns ^:shared tutorial-client.behavior\n    (:require [clojure.string :as string]\n              [io.pedestal.app.messages :as msg]\n              [io.pedestal.app :as app]))\n\n(defn inc-transform [old-value _]\n  ((fnil inc 0) old-value))\n\n(defn swap-transform [_ message]\n  (:value message))\n\n(defn init-main [_]\n  [[:transform-enable [:main :my-counter] :inc [{msg/topic [:my-counter]}]]])\n\n(def example-app\n  {:version 2\n   :transform [[:inc  [:my-counter] inc-transform]\n               [:swap [:**]         swap-transform]]\n   :emit [{:init init-main}\n          [#{[:my-counter] [:other-counters :*]} (app/default-emitter [:main])]]})\n","markers":{"markers":{"1":{"id":1,"range":[[18,27],[18,27]],"tailed":false,"reversed":false,"valid":true,"invalidate":"never","persistent":true,"properties":{"type":"selection","editorId":22,"goalBufferRange":null,"preserveFolds":true},"deserializer":"Marker"}},"deserializer":"MarkerManager"},"history":{"undoStack":[{"patches":[{"oldRange":[[2,48],[2,48]],"newRange":[[2,48],[3,0]],"oldText":"","newText":"\n","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"},{"oldRange":[[3,0],[3,0]],"newRange":[[3,0],[3,14]],"oldText":"","newText":"              ","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[3,14],[3,14]],"newRange":[[3,14],[3,39]],"oldText":"","newText":"[io.pedestal.app :as app]","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[7,0],[7,0]],"newRange":[[7,0],[8,0]],"oldText":"","newText":"\n","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"},{"oldRange":[[8,0],[8,0]],"newRange":[[8,0],[8,0]],"oldText":"","newText":"","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[8,0],[8,0]],"newRange":[[8,0],[9,0]],"oldText":"","newText":"\n","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"},{"oldRange":[[9,0],[9,0]],"newRange":[[9,0],[9,0]],"oldText":"","newText":"","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[8,0],[8,0]],"newRange":[[8,0],[9,77]],"oldText":"","newText":"(defn init-main [_]\n  [[:transform-enable [:main :my-counter] :inc [{msg/topic [:my-counter]}]]])","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[13,50],[13,50]],"newRange":[[13,50],[14,50]],"oldText":"","newText":":emit [{:init init-main}\n          [#{[:*]} (app/default-emitter [:main])]]","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[13,50],[13,50]],"newRange":[[13,50],[14,0]],"oldText":"","newText":"\n","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"},{"oldRange":[[14,0],[14,0]],"newRange":[[14,0],[14,3]],"oldText":"","newText":"   ","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[6,27],[6,27]],"newRange":[[6,27],[7,0]],"oldText":"","newText":"\n","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"},{"oldRange":[[7,0],[7,0]],"newRange":[[7,0],[7,2]],"oldText":"","newText":"  ","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[7,2],[7,2]],"newRange":[[7,2],[8,0]],"oldText":"","newText":"\n","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"},{"oldRange":[[8,0],[8,0]],"newRange":[[8,0],[8,2]],"oldText":"","newText":"  ","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"id":1,"oldParams":{"tailed":false},"newParams":{"tailed":true},"deserializer":"MarkerPatch"},{"id":1,"oldParams":{"range":[[8,2],[8,2]]},"newParams":{"range":[[8,0],[8,2]]},"deserializer":"MarkerPatch"},{"oldRange":[[8,0],[8,2]],"newRange":[[8,0],[8,0]],"oldText":"  ","newText":"","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"},{"id":1,"oldParams":{"tailed":true},"newParams":{"tailed":false},"deserializer":"MarkerPatch"}],"deserializer":"Transaction"},{"patches":[{"id":1,"oldParams":{"tailed":false},"newParams":{"tailed":true},"deserializer":"MarkerPatch"},{"id":1,"oldParams":{"range":[[8,0],[8,0]]},"newParams":{"range":[[7,2],[8,0]]},"deserializer":"MarkerPatch"},{"oldRange":[[7,2],[8,0]],"newRange":[[7,2],[7,2]],"oldText":"\n","newText":"","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"},{"id":1,"oldParams":{"tailed":true},"newParams":{"tailed":false},"deserializer":"MarkerPatch"}],"deserializer":"Transaction"},{"patches":[{"id":1,"oldParams":{"tailed":false},"newParams":{"tailed":true},"deserializer":"MarkerPatch"},{"id":1,"oldParams":{"range":[[7,2],[7,2]]},"newParams":{"range":[[7,0],[7,2]]},"deserializer":"MarkerPatch"},{"oldRange":[[7,0],[7,2]],"newRange":[[7,0],[7,0]],"oldText":"  ","newText":"","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"},{"id":1,"oldParams":{"tailed":true},"newParams":{"tailed":false},"deserializer":"MarkerPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[7,0],[7,0]],"newRange":[[7,0],[8,0]],"oldText":"","newText":"\n","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"},{"oldRange":[[8,0],[8,0]],"newRange":[[8,0],[8,0]],"oldText":"","newText":"","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[8,0],[8,0]],"newRange":[[8,0],[9,19]],"oldText":"","newText":"(defn swap-transform [_ message]\n  (:value message))","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[16,49],[16,49]],"newRange":[[16,49],[17,0]],"oldText":"","newText":"\n","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"},{"oldRange":[[17,0],[17,0]],"newRange":[[17,0],[17,3]],"oldText":"","newText":"   ","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[17,3],[17,3]],"newRange":[[17,3],[17,5]],"oldText":"","newText":"  ","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[17,5],[17,5]],"newRange":[[17,5],[17,7]],"oldText":"","newText":"  ","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[17,7],[17,7]],"newRange":[[17,7],[17,9]],"oldText":"","newText":"  ","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[17,9],[17,9]],"newRange":[[17,9],[17,11]],"oldText":"","newText":"  ","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[17,11],[17,11]],"newRange":[[17,11],[17,13]],"oldText":"","newText":"  ","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[17,13],[17,13]],"newRange":[[17,13],[17,15]],"oldText":"","newText":"  ","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[17,15],[17,15]],"newRange":[[17,15],[17,51]],"oldText":"","newText":"[:swap [:**]         swap-transform]","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"id":1,"oldParams":{"tailed":false},"newParams":{"tailed":true},"deserializer":"MarkerPatch"},{"id":1,"oldParams":{"range":[[17,36],[17,36]]},"newParams":{"range":[[17,35],[17,36]]},"deserializer":"MarkerPatch"},{"oldRange":[[17,35],[17,36]],"newRange":[[17,35],[17,35]],"oldText":" ","newText":"","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"},{"id":1,"oldParams":{"tailed":true},"newParams":{"tailed":false},"deserializer":"MarkerPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[16,21],[16,21]],"newRange":[[16,21],[16,22]],"oldText":"","newText":" ","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[17,35],[17,35]],"newRange":[[17,35],[17,36]],"oldText":"","newText":" ","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[3,39],[3,39]],"newRange":[[3,39],[4,0]],"oldText":"","newText":"\n","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"},{"oldRange":[[4,0],[4,0]],"newRange":[[4,0],[4,14]],"oldText":"","newText":"              ","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[4,14],[4,14]],"newRange":[[4,14],[5,49]],"oldText":"","newText":"[io.pedestal.app.protocols :as p]\n[tutorial-client.simulated.services :as services]","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[5,0],[5,0]],"newRange":[[5,0],[5,2]],"oldText":"","newText":"  ","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[5,0],[5,0]],"newRange":[[5,0],[5,2]],"oldText":"","newText":"  ","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[5,0],[5,0]],"newRange":[[5,0],[5,2]],"oldText":"","newText":"  ","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[5,0],[5,0]],"newRange":[[5,0],[5,2]],"oldText":"","newText":"  ","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[5,0],[5,0]],"newRange":[[5,0],[5,2]],"oldText":"","newText":"  ","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[5,0],[5,0]],"newRange":[[5,0],[5,2]],"oldText":"","newText":"  ","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[5,0],[5,0]],"newRange":[[5,0],[5,2]],"oldText":"","newText":"  ","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[22,0],[22,0]],"newRange":[[22,0],[23,0]],"oldText":"","newText":"\n","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"},{"oldRange":[[23,0],[23,0]],"newRange":[[23,0],[23,0]],"oldText":"","newText":"","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[23,0],[23,0]],"newRange":[[23,0],[27,9]],"oldText":"","newText":"(defn ^:export main []\n  (let [app (start/create-app d/data-renderer-config)\n        services (services/->MockServices (:app app))]\n    (p/start services)\n    app))","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[27,9],[27,9]],"newRange":[[27,9],[28,0]],"oldText":"","newText":"\n","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"},{"id":1,"oldParams":{"tailed":false},"newParams":{"tailed":true},"deserializer":"MarkerPatch"},{"id":1,"oldParams":{"reversed":true,"range":[[28,0],[28,0]]},"newParams":{"reversed":false,"range":[[27,9],[27,9]]},"deserializer":"MarkerPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[23,0],[27,9]],"newRange":[[23,0],[23,0]],"oldText":"(defn ^:export main []\n  (let [app (start/create-app d/data-renderer-config)\n        services (services/->MockServices (:app app))]\n    (p/start services)\n    app))","newText":"","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"},{"id":1,"oldParams":{"tailed":true},"newParams":{"tailed":false},"deserializer":"MarkerPatch"}],"deserializer":"Transaction"},{"patches":[{"id":1,"oldParams":{"tailed":false},"newParams":{"tailed":true},"deserializer":"MarkerPatch"},{"id":1,"oldParams":{"range":[[23,0],[23,0]]},"newParams":{"range":[[22,0],[23,0]]},"deserializer":"MarkerPatch"},{"oldRange":[[22,0],[23,0]],"newRange":[[22,0],[22,0]],"oldText":"\n","newText":"","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"},{"id":1,"oldParams":{"tailed":true},"newParams":{"tailed":false},"deserializer":"MarkerPatch"}],"deserializer":"Transaction"},{"patches":[{"id":1,"oldParams":{"tailed":false},"newParams":{"tailed":true},"deserializer":"MarkerPatch"},{"id":1,"oldParams":{"range":[[22,0],[22,0]]},"newParams":{"range":[[21,52],[22,0]]},"deserializer":"MarkerPatch"},{"oldRange":[[21,52],[22,0]],"newRange":[[21,52],[21,52]],"oldText":"\n","newText":"","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"},{"id":1,"oldParams":{"tailed":true},"newParams":{"tailed":false},"deserializer":"MarkerPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[3,39],[5,63]],"newRange":[[3,39],[3,39]],"oldText":"\n              [io.pedestal.app.protocols :as p]\n              [tutorial-client.simulated.services :as services]","newText":"","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"},{"id":1,"oldParams":{"tailed":true},"newParams":{"tailed":false},"deserializer":"MarkerPatch"}],"deserializer":"Transaction"},{"patches":[{"id":1,"oldParams":{"tailed":true,"range":[[19,10],[19,49]]},"newParams":{"tailed":false,"range":[[19,49],[19,49]]},"deserializer":"MarkerPatch"},{"oldRange":[[19,10],[19,49]],"newRange":[[19,10],[19,79]],"oldText":"[#{[:*]} (app/default-emitter [:main])]","newText":"[#{[:my-counter] [:other-counters :*]} (app/default-emitter [:main])]","normalizeLineEndings":{},"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"}],"redoStack":[],"deserializer":"History"},"filePath":"/Users/tehgeekmeister/code/pedestal-app-tutorial/tutorial-client/app/src/tutorial_client/behavior.clj","modifiedWhenLastPersisted":false,"digestWhenLastPersisted":"5b0b014b17b87c91dc66c5f8711ed3a406b16da1","deserializer":"TextBuffer"},{"text":"(ns tutorial-client.simulated.services\n  (:require [io.pedestal.app.protocols :as p]\n            [io.pedestal.app.messages :as msg]\n            [io.pedestal.app.util.platform :as platform]))\n\n(def counters (atom {\"abc\" 0 \"xyz\" 0}))\n\n(defn increment-counter [key t input-queue]\n  (p/put-message input-queue {msg/type :swap\n                              msg/topic [:other-counters key]\n                              :value (get (swap! counters update-in [key] inc) key)})\n  (platform/create-timeout t #(increment-counter key t input-queue)))\n\n(defn receive-messages [input-queue]\n  (increment-counter \"abc\" 2000 input-queue)\n  (increment-counter \"xyz\" 5000 input-queue))\n\n(defrecord MockServices [app]\n  p/Activity\n  (start [this]\n    (receive-messages (:input app)))\n  (stop [this]))\n","markers":{"markers":{"1":{"id":1,"range":[[22,0],[22,0]],"tailed":false,"reversed":false,"valid":true,"invalidate":"never","persistent":true,"properties":{"type":"selection","editorId":111,"goalBufferRange":null},"deserializer":"Marker"}},"deserializer":"MarkerManager"},"history":{"undoStack":[],"redoStack":[],"deserializer":"History"},"filePath":"/Users/tehgeekmeister/code/pedestal-app-tutorial/tutorial-client/app/src/tutorial_client/simulated/services.cljs","modifiedWhenLastPersisted":false,"digestWhenLastPersisted":"63159a02e3ce6eb3033b2d92727171ad50e2903e","deserializer":"TextBuffer"}],"deserializer":"Project"},"workspace":{"paneContainer":{"root":{"items":[{"id":22,"softTabs":true,"displayBuffer":{"id":23,"softWrap":false,"editorWidthInChars":149,"scrollTop":0,"scrollLeft":0,"tokenizedBuffer":{"bufferPath":"/Users/tehgeekmeister/code/pedestal-app-tutorial/tutorial-client/app/src/tutorial_client/behavior.clj","tabLength":2,"deserializer":"TokenizedBuffer"},"deserializer":"DisplayBuffer"},"deserializer":"Editor"},{"id":111,"softTabs":true,"displayBuffer":{"id":112,"softWrap":false,"editorWidthInChars":152,"scrollTop":0,"scrollLeft":0,"tokenizedBuffer":{"bufferPath":"/Users/tehgeekmeister/code/pedestal-app-tutorial/tutorial-client/app/src/tutorial_client/simulated/services.cljs","tabLength":2,"deserializer":"TokenizedBuffer"},"deserializer":"DisplayBuffer"},"deserializer":"Editor"}],"activeItemUri":"/Users/tehgeekmeister/code/pedestal-app-tutorial/tutorial-client/app/src/tutorial_client/behavior.clj","focused":false,"active":true,"deserializer":"Pane"},"deserializer":"PaneContainer"},"fullScreen":false,"deserializer":"Workspace"},"packageStates":{"fuzzy-finder":{"/Users/tehgeekmeister/code/pedestal-app-tutorial/tutorial-client/app/src/tutorial_client/behavior.clj":1398765227507,"/Users/tehgeekmeister/code/pedestal-app-tutorial/tutorial-client/app/src/tutorial_client/simulated/services.cljs":1398669444314},"keybinding-resolver":{"attached":false},"metrics":{"sessionLength":100223997},"tree-view":{"directoryExpansionStates":{"app":{"src":{"tutorial_client":{"simulated":{}}}},"test":{"tutorial_client":{}}},"selectedPath":"/Users/tehgeekmeister/code/pedestal-app-tutorial/tutorial-client/app/src/tutorial_client/behavior.clj","hasFocus":false,"attached":true,"scrollLeft":0,"scrollTop":0,"width":200},"find-and-replace":{"viewState":{"findHistory":[],"replaceHistory":[],"modelState":{"useRegex":false,"inCurrentSelection":false,"caseSensitive":false}}}}}